apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "sam.fullname" . }}-config
  labels:
    {{- include "sam.labels" . | nindent 4 }}
  {{- include "sam.annotations" . | nindent 2 }}
data:
  agent.yaml: |-
{{- if not .Values.config.agentYaml }}
{{- fail "config.agentYaml is required. Please provide the agent configuration using:\n  helm install --set-file config.agentYaml=/path/to/agent-config.yaml\nSee the agent configuration documentation for the required format." }}
{{- end }}
{{ .Values.config.agentYaml | nindent 4 }}