<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-intro" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Getting Started | Solace Agent Mesh</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://solaceproducts.github.io/solace-agent-mesh-helm-quickstart/docs-site/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://solaceproducts.github.io/solace-agent-mesh-helm-quickstart/docs-site/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://solaceproducts.github.io/solace-agent-mesh-helm-quickstart/docs-site/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Getting Started | Solace Agent Mesh"><meta data-rh="true" name="description" content="This Helm chart deploys Solace Agent Mesh (SAM) in enterprise mode on Kubernetes."><meta data-rh="true" property="og:description" content="This Helm chart deploys Solace Agent Mesh (SAM) in enterprise mode on Kubernetes."><link data-rh="true" rel="icon" href="/solace-agent-mesh-helm-quickstart/docs-site/img/favicon.png"><link data-rh="true" rel="canonical" href="https://solaceproducts.github.io/solace-agent-mesh-helm-quickstart/docs-site/"><link data-rh="true" rel="alternate" href="https://solaceproducts.github.io/solace-agent-mesh-helm-quickstart/docs-site/" hreflang="en"><link data-rh="true" rel="alternate" href="https://solaceproducts.github.io/solace-agent-mesh-helm-quickstart/docs-site/" hreflang="x-default"><script data-rh="true">function insertBanner(){var e=document.createElement("div");e.id="__docusaurus-base-url-issue-banner-container";e.innerHTML='\n<div id="__docusaurus-base-url-issue-banner" style="border: thick solid red; background-color: rgb(255, 230, 179); margin: 20px; padding: 20px; font-size: 20px;">\n   <p style="font-weight: bold; font-size: 30px;">Your Docusaurus site did not load properly.</p>\n   <p>A very common reason is a wrong site <a href="https://docusaurus.io/docs/docusaurus.config.js/#baseUrl" style="font-weight: bold;">baseUrl configuration</a>.</p>\n   <p>Current configured baseUrl = <span style="font-weight: bold; color: red;">/solace-agent-mesh-helm-quickstart/docs-site/</span> </p>\n   <p>We suggest trying baseUrl = <span id="__docusaurus-base-url-issue-banner-suggestion-container" style="font-weight: bold; color: green;"></span></p>\n</div>\n',document.body.prepend(e);var n=document.getElementById("__docusaurus-base-url-issue-banner-suggestion-container"),s=window.location.pathname,o="/"===s.substr(-1)?s:s+"/";n.innerHTML=o}document.addEventListener("DOMContentLoaded",function(){void 0===window.docusaurus&&insertBanner()})</script><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Getting Started","item":"https://solaceproducts.github.io/solace-agent-mesh-helm-quickstart/docs-site/"}]}</script><link rel="stylesheet" href="/solace-agent-mesh-helm-quickstart/docs-site/assets/css/styles.4b065cb5.css">
<script src="/solace-agent-mesh-helm-quickstart/docs-site/assets/js/runtime~main.cb0cff3b.js" defer="defer"></script>
<script src="/solace-agent-mesh-helm-quickstart/docs-site/assets/js/main.a527487c.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/solace-agent-mesh-helm-quickstart/docs-site/img/logo.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/solace-agent-mesh-helm-quickstart/docs-site/"><div class="navbar__logo"><img src="/solace-agent-mesh-helm-quickstart/docs-site/img/logo.png" alt="Solace Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/solace-agent-mesh-helm-quickstart/docs-site/img/logo.png" alt="Solace Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Solace Agent Mesh</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/solace-agent-mesh-helm-quickstart/docs-site/">Documentation</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/SolaceProducts/solace-agent-mesh-helm-quickstart" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/solace-agent-mesh-helm-quickstart/docs-site/"><span title="Getting Started" class="linkLabel_WmDU">Getting Started</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/solace-agent-mesh-helm-quickstart/docs-site/network-configuration"><span title="Network Configuration" class="linkLabel_WmDU">Network Configuration</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/solace-agent-mesh-helm-quickstart/docs-site/troubleshooting"><span title="Troubleshooting" class="linkLabel_WmDU">Troubleshooting</span></a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/solace-agent-mesh-helm-quickstart/docs-site/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Getting Started</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Solace Agent Mesh (SAM) - Helm Chart</h1></header>
<p>This Helm chart deploys Solace Agent Mesh (SAM) in enterprise mode on Kubernetes.</p>
<blockquote>
<p>⚠️<!-- --> This Helm chart is <strong>not ready yet</strong> for production use.
We are actively developing and testing this chart. Expect breaking changes and incomplete functionality.
Please check back later or follow the repository for updates.</p>
</blockquote>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="table-of-contents">Table of Contents<a href="#table-of-contents" class="hash-link" aria-label="Direct link to Table of Contents" title="Direct link to Table of Contents" translate="no">​</a></h2>
<ul>
<li class=""><a href="#prerequisites" class="">Prerequisites</a></li>
<li class=""><a href="#installation" class="">Installation</a>
<ul>
<li class=""><a href="#step-1-add-helm-repository" class="">Step 1: Add Helm Repository</a></li>
<li class=""><a href="#step-2-configure-image-pull-secret" class="">Step 2: Configure Image Pull Secret</a></li>
<li class=""><a href="#step-3-prepare-and-update-helm-values" class="">Step 3: Prepare and update Helm values</a></li>
<li class=""><a href="#step-4-install-the-chart" class="">Step 4: Install the Chart</a></li>
</ul>
</li>
<li class=""><a href="#accessing-sam" class="">Accessing SAM</a>
<ul>
<li class=""><a href="#network-configuration" class="">Network Configuration</a></li>
</ul>
</li>
<li class=""><a href="#upgrading" class="">Upgrading</a></li>
<li class=""><a href="#uninstalling" class="">Uninstalling</a></li>
<li class=""><a href="#configuration-options" class="">Configuration Options</a>
<ul>
<li class=""><a href="#required-configuration" class="">Required Configuration</a></li>
<li class=""><a href="#service-configuration" class="">Service Configuration</a></li>
<li class=""><a href="#resource-limits" class="">Resource Limits</a></li>
<li class=""><a href="#persistence" class="">Persistence</a>
<ul>
<li class=""><a href="#option-1-using-built-in-persistence-layer" class="">Option 1: Using Built-in Persistence Layer</a></li>
<li class=""><a href="#option-2-using-external-postgresql-and-s3-recommended-for-production" class="">Option 2: Using External PostgreSQL and S3 (Recommended for Production)</a></li>
</ul>
</li>
<li class=""><a href="#role-based-access-control-rbac" class="">Role-Based Access Control (RBAC)</a>
<ul>
<li class=""><a href="#understanding-roles-and-permissions" class="">Understanding Roles and Permissions</a></li>
<li class=""><a href="#option-1-updating-configmaps-directly-quick-changes" class="">Option 1: Updating ConfigMaps Directly (Quick Changes)</a></li>
<li class=""><a href="#option-2-updating-the-helm-chart-persistent-changes" class="">Option 2: Updating the Helm Chart (Persistent Changes)</a></li>
<li class=""><a href="#common-scope-patterns" class="">Common Scope Patterns</a></li>
<li class=""><a href="#verifying-user-access" class="">Verifying User Access</a></li>
</ul>
</li>
<li class=""><a href="#disabling-authentication-development-only" class="">Disabling Authentication (Development Only)</a></li>
</ul>
</li>
<li class=""><a href="#troubleshooting" class="">Troubleshooting</a></li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="prerequisites">Prerequisites<a href="#prerequisites" class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites" translate="no">​</a></h2>
<ul>
<li class="">Kubernetes cluster (1.34+)</li>
<li class="">Helm 3.19.0+ (Download Helm from <a href="https://helm.sh/docs/intro/install/" target="_blank" rel="noopener noreferrer" class="">https://helm.sh/docs/intro/install/</a>)</li>
<li class="">kubectl configured to communicate with your cluster</li>
<li class="">A Solace Event Broker instance<!-- -->
<ul>
<li class=""><a href="https://github.com/SolaceProducts/pubsubplus-kubernetes-helm-quickstart/blob/master/docs/PubSubPlusK8SDeployment.md" target="_blank" rel="noopener noreferrer" class="">Deploy on Kubernetes using Helm</a></li>
<li class=""><a href="https://docs.solace.com/Cloud/ggs_create_first_service.htm" target="_blank" rel="noopener noreferrer" class="">Create an event broker on Solace Cloud</a></li>
</ul>
</li>
<li class="">LLM service credentials (e.g., OpenAI API key)</li>
<li class="">OIDC provider configured (for enterprise mode authentication)</li>
<li class="">TLS certificate and key files (only for LoadBalancer/NodePort without Ingress; not needed when using Ingress with ACM/cert-manager)</li>
<li class="">PostgreSQL database (version 17+, for production deployments with external persistence)</li>
<li class="">S3-compatible storage (e.g., Amazon S3, for production deployments with external persistence)</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="installation">Installation<a href="#installation" class="hash-link" aria-label="Direct link to Installation" title="Direct link to Installation" translate="no">​</a></h2>
<p>Before installing SAM, review the available <a href="#step-3-prepare-and-update-helm-values" class="">configuration templates</a> and customize the values according to your deployment requirements. For detailed configuration options, see the <a href="#configuration-options" class="">Configuration Options</a> section.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="step-1-add-helm-repository">Step 1: Add Helm Repository<a href="#step-1-add-helm-repository" class="hash-link" aria-label="Direct link to Step 1: Add Helm Repository" title="Direct link to Step 1: Add Helm Repository" translate="no">​</a></h3>
<p>Add the Solace Agent Mesh Helm repository:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">helm repo add solace-agent-mesh https://solaceproducts.github.io/solace-agent-mesh-helm-quickstart/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">helm repo update</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="step-2-configure-image-pull-secret">Step 2: Configure Image Pull Secret<a href="#step-2-configure-image-pull-secret" class="hash-link" aria-label="Direct link to Step 2: Configure Image Pull Secret" title="Direct link to Step 2: Configure Image Pull Secret" translate="no">​</a></h3>
<p>SAM requires access to container images. You have two options:</p>
<p><strong>Option 1: Use Solace Cloud Image Pull Secret (Recommended)</strong></p>
<p>Obtain the image pull secret from Solace Cloud following the instructions at <a href="https://docs.solace.com/Cloud/private_regions_tab.htm?Highlight=create%20a%20private%20region#Download" target="_blank" rel="noopener noreferrer" class="">Download Image Pull Secret</a>.</p>
<p>Create the secret in your Kubernetes cluster:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f &lt;path-to-downloaded-secret-file&gt;.yaml</span><br></span></code></pre></div></div>
<p><strong>Option 2: Use Your Own Container Registry</strong></p>
<p>Download the SAM images from Solace Products, push them to your own container registry, and create an image pull secret for your registry:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl create secret docker-registry my-registry-secret \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --docker-server=&lt;your-registry-server&gt; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --docker-username=&lt;your-username&gt; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --docker-password=&lt;your-password&gt; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --docker-email=&lt;your-email&gt;</span><br></span></code></pre></div></div>
<p>When using your own registry, you&#x27;ll also need to update the image repository paths in your values file (Step 3).</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="step-3-prepare-and-update-helm-values">Step 3: Prepare and update Helm values<a href="#step-3-prepare-and-update-helm-values" class="hash-link" aria-label="Direct link to Step 3: Prepare and update Helm values" title="Direct link to Step 3: Prepare and update Helm values" translate="no">​</a></h3>
<p>Choose one of the sample values files based on your deployment needs. Before proceeding, review the <a href="#required-configuration" class="">Required Configuration</a> section to understand what values you need to provide.</p>
<p>Sample values: <a href="https://github.com/SolaceProducts/solace-agent-mesh-helm-quickstart/tree/main/samples/values/" target="_blank" rel="noopener noreferrer" class="">samples/values</a></p>
<ol>
<li class="">
<p><strong><a href="https://github.com/SolaceProducts/solace-agent-mesh-helm-quickstart/blob/main/samples/values/sam-tls-bundled-persistence-no-auth.yaml" target="_blank" rel="noopener noreferrer" class=""><code>sam-tls-bundled-persistence-no-auth.yaml</code></a></strong> ⚠️ <strong>Development Only</strong></p>
<ul>
<li class="">No authentication, bundled persistence</li>
<li class="">For local development and testing only</li>
</ul>
</li>
<li class="">
<p><strong><a href="https://github.com/SolaceProducts/solace-agent-mesh-helm-quickstart/blob/main/samples/values/sam-tls-oidc-bundled-persistence.yaml" target="_blank" rel="noopener noreferrer" class=""><code>sam-tls-oidc-bundled-persistence.yaml</code></a></strong> - <strong>POC/Demo</strong></p>
<ul>
<li class="">OIDC authentication, bundled persistence</li>
<li class="">For quick start, proof-of-concept, or demo environments</li>
<li class=""><strong>Note</strong>: When using bundled persistence in managed cloud providers, configure regional node pools (one per availability zone) and a default StorageClass with <code>volumeBindingMode: WaitForFirstConsumer</code> to prevent scheduling failures</li>
</ul>
</li>
<li class="">
<p><strong><a href="https://github.com/SolaceProducts/solace-agent-mesh-helm-quickstart/blob/main/samples/values/sam-tls-oidc-customer-provided-persistence.yaml" target="_blank" rel="noopener noreferrer" class=""><code>sam-tls-oidc-customer-provided-persistence.yaml</code></a></strong> ⭐ <strong>Production</strong></p>
<ul>
<li class="">OIDC authentication, external PostgreSQL + S3</li>
<li class="">For production deployments with managed database/storage</li>
</ul>
</li>
</ol>
<blockquote>
<p><strong>Note</strong>: TLS certificates are only required when using <code>service.type: LoadBalancer</code> or <code>NodePort</code>. When using Ingress, TLS is managed at the Ingress level (see <a class="" href="/solace-agent-mesh-helm-quickstart/docs-site/network-configuration">Network Configuration Guide</a>).</p>
</blockquote>
<p>Copy your chosen template and customize it:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cp samples/values/sam-tls-oidc-bundled-persistence.yaml custom-values.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Edit custom-values.yaml with your configuration</span><br></span></code></pre></div></div>
<p><strong>Key values to update:</strong></p>
<ul>
<li class=""><code>sam.dnsName</code>: Your DNS hostname</li>
<li class=""><code>sam.sessionSecretKey</code>: Generate a secure random string</li>
<li class=""><code>sam.oauthProvider.oidc</code>: Your OIDC provider details</li>
<li class=""><code>sam.authenticationRbac.users</code>: User email addresses and roles</li>
<li class=""><code>broker.*</code>: Your Solace broker credentials</li>
<li class=""><code>llmService.*</code>: Your LLM service credentials</li>
<li class=""><code>samDeployment.imagePullSecret</code>: <strong>Required</strong> - Name of the image pull secret created in Step 2 (e.g., <code>solace-image-pull-secret</code> or <code>my-registry-secret</code>)</li>
<li class=""><code>samDeployment.image.repository</code>: Image repository path (if using your own registry from Step 2, Option 2)</li>
<li class=""><code>samDeployment.image.tag</code>: SAM application image version (if using specific version)</li>
<li class=""><code>samDeployment.agentDeployer.image.repository</code>: Agent deployer image repository path (if using your own registry from Step 2, Option 2)</li>
<li class=""><code>samDeployment.agentDeployer.image.tag</code>: Agent deployer image version (if using specific version)</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="step-4-install-the-chart">Step 4: Install the Chart<a href="#step-4-install-the-chart" class="hash-link" aria-label="Direct link to Step 4: Install the Chart" title="Direct link to Step 4: Install the Chart" translate="no">​</a></h3>
<p>Install using Helm with your custom values and TLS certificates:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">helm install agent-mesh solace-agent-mesh/solace-agent-mesh \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -f custom-values.yaml \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set-file service.tls.cert=/path/to/tls.crt \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set-file service.tls.key=/path/to/tls.key</span><br></span></code></pre></div></div>
<p>To install a specific version (see <a href="https://github.com/SolaceProducts/solace-agent-mesh-helm-quickstart/tree/gh-pages" target="_blank" rel="noopener noreferrer" class="">available releases</a>):</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># List available versions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">helm search repo solace-agent-mesh/solace-agent-mesh --versions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Install specific version</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">helm install agent-mesh solace-agent-mesh/solace-agent-mesh \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --version 0.0.3 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -f custom-values.yaml \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set-file service.tls.cert=/path/to/tls.crt \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set-file service.tls.key=/path/to/tls.key \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set service.tls.passphrase=&quot;your-passphrase&quot;</span><br></span></code></pre></div></div>
<p><strong>Note</strong>: TLS certificates are only required when using <code>service.type: LoadBalancer</code> or <code>NodePort</code>. When using Ingress, TLS is managed at the Ingress level. See the <a class="" href="/solace-agent-mesh-helm-quickstart/docs-site/network-configuration">Network Configuration Guide</a> for details.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="step-5-verify-deployment">Step 5: Verify Deployment<a href="#step-5-verify-deployment" class="hash-link" aria-label="Direct link to Step 5: Verify Deployment" title="Direct link to Step 5: Verify Deployment" translate="no">​</a></h3>
<p>Check the deployment status:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Check Helm release status</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">helm status agent-mesh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Check pod status</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get pods -l app.kubernetes.io/instance=agent-mesh</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="accessing-sam">Accessing SAM<a href="#accessing-sam" class="hash-link" aria-label="Direct link to Accessing SAM" title="Direct link to Accessing SAM" translate="no">​</a></h2>
<p>SAM can be accessed through LoadBalancer, NodePort, Ingress, or port-forward depending on your service configuration.</p>
<p>For detailed network configuration options, access methods, and production deployment recommendations, see the <a class="" href="/solace-agent-mesh-helm-quickstart/docs-site/network-configuration">Network Configuration Guide</a>.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="upgrading">Upgrading<a href="#upgrading" class="hash-link" aria-label="Direct link to Upgrading" title="Direct link to Upgrading" translate="no">​</a></h2>
<p>Before upgrading, always update your Helm repository to get the latest chart versions:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">helm repo update solace-agent-mesh</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="upgrading-sam-core-deployment">Upgrading SAM Core Deployment<a href="#upgrading-sam-core-deployment" class="hash-link" aria-label="Direct link to Upgrading SAM Core Deployment" title="Direct link to Upgrading SAM Core Deployment" translate="no">​</a></h3>
<p>To upgrade your SAM core deployment, you can reuse your existing Helm values and apply updates on top of them.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="option-1-retrieve-and-update-existing-values">Option 1: Retrieve and Update Existing Values<a href="#option-1-retrieve-and-update-existing-values" class="hash-link" aria-label="Direct link to Option 1: Retrieve and Update Existing Values" title="Direct link to Option 1: Retrieve and Update Existing Values" translate="no">​</a></h4>
<p>Get your current deployment values and save them to a file:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">helm get values agent-mesh -n &lt;namespace&gt; &gt; current-values.yaml</span><br></span></code></pre></div></div>
<p>Review and edit <code>current-values.yaml</code> to make your desired changes, then upgrade:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">helm upgrade agent-mesh solace-agent-mesh/solace-agent-mesh \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -n &lt;namespace&gt; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -f current-values.yaml \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set-file service.tls.cert=/path/to/tls.crt \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set-file service.tls.key=/path/to/tls.key</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="option-2-reuse-existing-values-with-specific-overrides">Option 2: Reuse Existing Values with Specific Overrides<a href="#option-2-reuse-existing-values-with-specific-overrides" class="hash-link" aria-label="Direct link to Option 2: Reuse Existing Values with Specific Overrides" title="Direct link to Option 2: Reuse Existing Values with Specific Overrides" translate="no">​</a></h4>
<p>Reuse all existing values and override specific values:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Upgrade while reusing existing values and updating specific settings</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">helm upgrade agent-mesh solace-agent-mesh/solace-agent-mesh \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -n &lt;namespace&gt; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --reuse-values \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set samDeployment.image.tag=new-version \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set-file service.tls.cert=/path/to/tls.crt \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set-file service.tls.key=/path/to/tls.key</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="option-3-use-your-original-values-file-with-updates">Option 3: Use Your Original Values File with Updates<a href="#option-3-use-your-original-values-file-with-updates" class="hash-link" aria-label="Direct link to Option 3: Use Your Original Values File with Updates" title="Direct link to Option 3: Use Your Original Values File with Updates" translate="no">​</a></h4>
<p>If you still have your original <code>custom-values.yaml</code> file, update it with any new changes and upgrade:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">helm upgrade agent-mesh solace-agent-mesh/solace-agent-mesh \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -n &lt;namespace&gt; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -f custom-values.yaml \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set-file service.tls.cert=/path/to/tls.crt \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set-file service.tls.key=/path/to/tls.key</span><br></span></code></pre></div></div>
<p><strong>Note:</strong> After upgrading, verify the deployment status:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl rollout status deployment/agent-mesh-core -n &lt;namespace&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get pods -n &lt;namespace&gt; -l app.kubernetes.io/instance=agent-mesh</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="upgrading-sam-agents">Upgrading SAM Agents<a href="#upgrading-sam-agents" class="hash-link" aria-label="Direct link to Upgrading SAM Agents" title="Direct link to Upgrading SAM Agents" translate="no">​</a></h3>
<p>To upgrade individual agents deployed through SAM, use the agent&#x27;s release name and update the image tag:</p>
<p><strong>Important:</strong> If the agent chart name has changed between versions, you may need to delete and recreate the agent deployment instead of upgrading. See <a href="#common-issues" class="">Common Issues</a> below.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Update Helm repository first</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">helm repo update solace-agent-mesh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Upgrade the agent with new image version</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">helm upgrade -i &lt;agent-release-name&gt; solace-agent-mesh/sam-agent \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -n &lt;namespace&gt; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --reuse-values \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set image.tag=&lt;new-version&gt;</span><br></span></code></pre></div></div>
<p><strong>Example:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">helm upgrade -i sam-agent-0a42a319-13a8-4b31-b696-9f750d5c6a20 solace-agent-mesh/sam-agent \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -n fwanssa \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --reuse-values \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set image.tag=1.6.1-5</span><br></span></code></pre></div></div>
<p><strong>Verify the agent upgrade:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get deployment &lt;agent-release-name&gt; -n &lt;namespace&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl logs deployment/&lt;agent-release-name&gt; -n &lt;namespace&gt; --tail=50</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="uninstalling">Uninstalling<a href="#uninstalling" class="hash-link" aria-label="Direct link to Uninstalling" title="Direct link to Uninstalling" translate="no">​</a></h2>
<p>To uninstall the chart:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">helm uninstall agent-mesh</span><br></span></code></pre></div></div>
<p>Note: This will not delete PersistentVolumeClaims when using bundled persistence. To delete them:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl delete pvc -l app.kubernetes.io/instance=agent-mesh</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="configuration-options">Configuration Options<a href="#configuration-options" class="hash-link" aria-label="Direct link to Configuration Options" title="Direct link to Configuration Options" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="required-configuration">Required Configuration<a href="#required-configuration" class="hash-link" aria-label="Direct link to Required Configuration" title="Direct link to Required Configuration" translate="no">​</a></h3>
<p>Before deploying SAM, you must configure the following required values in your <code>values.yaml</code> or custom values file:</p>
<ol>
<li class="">
<p><strong>SAM Configuration</strong> (<code>sam</code> section):</p>
<ul>
<li class=""><code>dnsName</code>: DNS-resolvable hostname for SAM web UI/API (e.g., <code>sam.example.com</code>)</li>
<li class=""><code>sessionSecretKey</code>: Secret key for session management</li>
</ul>
</li>
<li class="">
<p><strong>Solace Broker Configuration</strong> (<code>broker</code> section):</p>
<ul>
<li class=""><code>url</code>: WebSocket Secure URL to your broker (e.g., <code>wss://mr2zq0g0f1.messaging.solace.cloud:443</code>)</li>
<li class=""><code>clientUsername</code>: Broker username</li>
<li class=""><code>password</code>: Broker password</li>
<li class=""><code>vpn</code>: VPN name</li>
</ul>
</li>
<li class="">
<p><strong>LLM Service Configuration</strong> (<code>llmService</code> section):</p>
<ul>
<li class=""><code>planningModel</code>, <code>generalModel</code>, <code>reportModel</code>, <code>imageModel</code>, <code>transcriptionModel</code>: Model names</li>
<li class=""><code>llmServiceEndpoint</code>: LLM service API endpoint (e.g., <code>https://api.openai.com/v1</code>)</li>
<li class=""><code>llmServiceApiKey</code>: API key for LLM service</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="service-configuration">Service Configuration<a href="#service-configuration" class="hash-link" aria-label="Direct link to Service Configuration" title="Direct link to Service Configuration" translate="no">​</a></h3>
<p>SAM supports multiple exposure methods. The default is ClusterIP with Ingress for production use:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">service</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ClusterIP  </span><span class="token comment" style="color:#999988;font-style:italic"># or LoadBalancer, NodePort</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">tls</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">enabled</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">false</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Set to true for LoadBalancer/NodePort without Ingress</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">passphrase</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">ingress</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">enabled</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">false</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Set to true for production deployments</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">className</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;alb&quot;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># or &quot;nginx&quot;, &quot;traefik&quot;, etc.</span><br></span></code></pre></div></div>
<p><strong>For detailed configuration options and examples, see the <a class="" href="/solace-agent-mesh-helm-quickstart/docs-site/network-configuration">Network Configuration Guide</a>.</strong></p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="resource-limits">Resource Limits<a href="#resource-limits" class="hash-link" aria-label="Direct link to Resource Limits" title="Direct link to Resource Limits" translate="no">​</a></h3>
<p>Adjust resource requests and limits based on your workload:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">samDeployment</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">resources</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">sam</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">requests</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 1000m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 1024Mi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">limits</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 2000m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 2048Mi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">agentDeployer</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">requests</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 100m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 256Mi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">limits</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 200m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 512Mi</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="persistence">Persistence<a href="#persistence" class="hash-link" aria-label="Direct link to Persistence" title="Direct link to Persistence" translate="no">​</a></h3>
<p>SAM requires persistent storage for session data and artifacts. You can choose between two persistence options:</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="option-1-using-built-in-persistence-layer-devpoc-only">Option 1: Using Built-in Persistence Layer (Dev/POC Only)<a href="#option-1-using-built-in-persistence-layer-devpoc-only" class="hash-link" aria-label="Direct link to Option 1: Using Built-in Persistence Layer (Dev/POC Only)" title="Direct link to Option 1: Using Built-in Persistence Layer (Dev/POC Only)" translate="no">​</a></h4>
<p><strong>⚠️ Not recommended for production.</strong> The chart can deploy PostgreSQL and SeaweedFS for quick start, demos, and proof-of-concept deployments.</p>
<p>To enable built-in persistence:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">global</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">persistence</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">enabled</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">namespaceId</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;solace-agent-mesh&quot;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Must be unique per SAM installation</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="option-2-using-external-postgresql-and-s3--recommended-for-production">Option 2: Using External PostgreSQL and S3 ⭐ Recommended for Production<a href="#option-2-using-external-postgresql-and-s3--recommended-for-production" class="hash-link" aria-label="Direct link to Option 2: Using External PostgreSQL and S3 ⭐ Recommended for Production" title="Direct link to Option 2: Using External PostgreSQL and S3 ⭐ Recommended for Production" translate="no">​</a></h4>
<p>Use your own managed PostgreSQL database and S3-compatible storage for better scalability, reliability, and separation of concerns.</p>
<p><strong>Note:</strong> Built-in persistence is disabled by default (<code>global.persistence.enabled: false</code>), so you only need to configure your external data stores.</p>
<p><strong>Configure external database and S3 storage</strong></p>
<p>Configure your external PostgreSQL and S3 storage using the <code>dataStores</code> section in your <code>values.yaml</code>.</p>
<p><strong>Important:</strong> The database credentials must have admin privileges (CREATEDB and CREATEROLE) because SAM&#x27;s init container uses them to automatically create database protocol and users for both the main application and any agents deployed through the SAM UI.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Disable built-in persistence layer</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">global</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">persistence</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">enabled</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Configure external PostgreSQL and S3 for SAM application</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">dataStores</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">database</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">protocol</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;postgresql+psycopg2&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">host</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;your-postgres-host&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;5432&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">adminUsername</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;your-db-admin-user&quot;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Must have CREATEDB and CREATEROLE privileges</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">adminPassword</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;your-db-admin-password&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">s3</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">endpointUrl</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;your-s3-endpoint-url&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">bucketName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;your-bucket-name&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">accessKey</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;your-s3-access-key&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">secretKey</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;your-s3-secret-key&quot;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="role-based-access-control-rbac">Role-Based Access Control (RBAC)<a href="#role-based-access-control-rbac" class="hash-link" aria-label="Direct link to Role-Based Access Control (RBAC)" title="Direct link to Role-Based Access Control (RBAC)" translate="no">​</a></h3>
<p>When SAM is deployed in enterprise mode, it includes a built-in RBAC system to control user access to tools and features. The RBAC configuration is managed through Kubernetes ConfigMaps.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="understanding-roles-and-permissions">Understanding Roles and Permissions<a href="#understanding-roles-and-permissions" class="hash-link" aria-label="Direct link to Understanding Roles and Permissions" title="Direct link to Understanding Roles and Permissions" translate="no">​</a></h4>
<p>The RBAC system consists of:</p>
<ol>
<li class=""><strong>Roles</strong>: Named collections of permissions (scopes)</li>
<li class=""><strong>User Assignments</strong>: Mappings of users (by email) to roles</li>
</ol>
<p>By default, two roles are provided:</p>
<ul>
<li class=""><code>sam_admin</code>: Full access to all features (scope: <code>*</code>)</li>
<li class=""><code>sam_user</code>: Basic access to read artifacts and basic tools</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="option-1-updating-configmaps-directly-quick-changes">Option 1: Updating ConfigMaps Directly (Quick Changes)<a href="#option-1-updating-configmaps-directly-quick-changes" class="hash-link" aria-label="Direct link to Option 1: Updating ConfigMaps Directly (Quick Changes)" title="Direct link to Option 1: Updating ConfigMaps Directly (Quick Changes)" translate="no">​</a></h4>
<p>For quick changes to running deployments, you can edit the ConfigMaps directly:</p>
<p><strong>1. Edit role definitions:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl edit configmap &lt;release-name&gt;-role-definitions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Example: kubectl edit configmap agent-mesh-role-definitions</span><br></span></code></pre></div></div>
<p>Modify the <code>role-to-scope-definitions.yaml</code> data:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">role-to-scope-definitions.yaml</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    roles:</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">      sam_admin:</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        description: &quot;Full access for SAM administrators&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        scopes:</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          - &quot;*&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">custom_role</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">description</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Your custom role&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">scopes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;artifact:read&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;tool:custom:*&quot;</span><br></span></code></pre></div></div>
<p><strong>2. Edit user role assignments:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl edit configmap &lt;release-name&gt;-user-roles</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Example: kubectl edit configmap agent-mesh-user-roles</span><br></span></code></pre></div></div>
<p><strong>Note:</strong> User identifiers can be an email address, username, name. They are <strong>case-sensitive</strong>, so ensure exact matches with your OIDC provider&#x27;s user identifiers.</p>
<p>Modify the <code>user-to-role-assignments.yaml</code> data:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">user-to-role-assignments.yaml</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    users:</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">      admin@example.com:</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        roles: [&quot;sam_admin&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        description: &quot;SAM Administrator&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">newuser@example.com</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">roles</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;sam_user&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">description</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;New User&quot;</span><br></span></code></pre></div></div>
<p><strong>3. Restart the deployment to apply changes:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl rollout restart deployment/&lt;release-name&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Example: kubectl rollout restart deployment/solace-agent-mesh</span><br></span></code></pre></div></div>
<p><strong>Note:</strong> Changes made directly to ConfigMaps will be overwritten on the next Helm upgrade. To persist changes, update the Helm chart (Option 2).</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="option-2-updating-the-helm-chart-persistent-changes">Option 2: Updating the Helm Chart (Persistent Changes)<a href="#option-2-updating-the-helm-chart-persistent-changes" class="hash-link" aria-label="Direct link to Option 2: Updating the Helm Chart (Persistent Changes)" title="Direct link to Option 2: Updating the Helm Chart (Persistent Changes)" translate="no">​</a></h4>
<p>To make permanent changes that survive Helm upgrades:</p>
<p><strong>1. Edit the chart template</strong> <code>charts/solace-agent-mesh/templates/configmap_sam_config_files.yaml</code>:</p>
<p>Find the <code>sam-role-definitions</code> ConfigMap section (around line 340) and modify roles:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">role-to-scope-definitions.yaml</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    roles:</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">      sam_admin:</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        description: &quot;Full access for SAM administrators&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        scopes:</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          - &quot;*&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">custom_role</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">description</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Your custom role&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">scopes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;artifact:read&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;tool:specific:action&quot;</span><br></span></code></pre></div></div>
<p>Find the <code>sam-user-roles</code> ConfigMap section (around line 369) and modify user assignments:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">user-to-role-assignments.yaml</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    users:</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">      admin@example.com:</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        roles: [&quot;sam_admin&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        description: &quot;SAM Administrator&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">user@company.com</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">roles</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;custom_role&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">description</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Custom role user&quot;</span><br></span></code></pre></div></div>
<p><strong>2. Upgrade the Helm deployment:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">helm upgrade agent-mesh solace-agent-mesh/solace-agent-mesh \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -f custom-values.yaml \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set-file service.tls.cert=/path/to/tls.crt \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set-file service.tls.key=/path/to/tls.key</span><br></span></code></pre></div></div>
<p><strong>3. Verify the changes:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get configmap &lt;release-name&gt;-role-definitions -o yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get configmap &lt;release-name&gt;-user-roles -o yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Example: kubectl get configmap agent-mesh-role-definitions -o yaml</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="common-scope-patterns">Common Scope Patterns<a href="#common-scope-patterns" class="hash-link" aria-label="Direct link to Common Scope Patterns" title="Direct link to Common Scope Patterns" translate="no">​</a></h4>
<ul>
<li class=""><code>*</code> - All permissions (admin access)</li>
<li class=""><code>tool:data:*</code> - All data-related tools</li>
<li class=""><code>tool:specific:action</code> - Specific tool and action</li>
<li class=""><code>tool:artifact:list</code> - List artifacts</li>
<li class=""><code>tool:artifact:load</code> - Download artifacts</li>
<li class=""><code>sam:agent_builder:create</code> - Create agent builders</li>
<li class=""><code>sam:agent_builder:read</code> - Read agent builders</li>
<li class=""><code>sam:agent_builder:update</code> - Update agent builders</li>
<li class=""><code>sam:agent_builder:delete</code> - Delete agent builders</li>
<li class=""><code>sam:connectors:create</code> - Create connectors</li>
<li class=""><code>sam:connectors:read</code> - Read connectors</li>
<li class=""><code>sam:connectors:update</code> - Update connectors</li>
<li class=""><code>sam:connectors:delete</code> - Delete connectors</li>
<li class=""><code>sam:deployments:create</code> - Create deployments</li>
<li class=""><code>sam:deployments:read</code> - Read deployments</li>
<li class=""><code>sam:deployments:update</code> - Update deployments</li>
<li class=""><code>sam:deployments:delete</code> - Delete deployments</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="verifying-user-access">Verifying User Access<a href="#verifying-user-access" class="hash-link" aria-label="Direct link to Verifying User Access" title="Direct link to Verifying User Access" translate="no">​</a></h4>
<p>After updating RBAC configuration:</p>
<ol>
<li class=""><strong>Check pod logs</strong> to verify configuration loaded:</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl logs -l app.kubernetes.io/instance=agent-mesh --tail=50</span><br></span></code></pre></div></div>
<ol start="2">
<li class="">
<p><strong>Test user access</strong> by logging in as different users through the SAM web UI</p>
</li>
<li class="">
<p><strong>Review ConfigMaps</strong> to confirm changes:</p>
</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl describe configmap &lt;release-name&gt;-role-definitions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl describe configmap &lt;release-name&gt;-user-roles</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Example: kubectl describe configmap agent-mesh-role-definitions</span><br></span></code></pre></div></div>
<p>For more details on RBAC configuration, see the <a href="http://solacelabs.github.io/solace-agent-mesh/docs/documentation/enterprise/rbac-setup-guide" target="_blank" rel="noopener noreferrer" class="">SAM RBAC Setup Guide</a>.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="disabling-authentication-development-only">Disabling Authentication (Development Only)<a href="#disabling-authentication-development-only" class="hash-link" aria-label="Direct link to Disabling Authentication (Development Only)" title="Direct link to Disabling Authentication (Development Only)" translate="no">​</a></h3>
<p><strong>⚠️ Warning:</strong> Disabling authentication is only suitable for development and testing environments. Never use this in production.</p>
<p>For development environments, you can disable authentication by setting the <code>issuer</code> to an empty string:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">sam</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">enterprise</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">dnsName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;sam.example.com&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">sessionSecretKey</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;your-secret-key&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">oauthProvider</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">oidc</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">issuer</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Leave empty to disable OIDC authentication</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">clientId</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">clientSecret</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><br></span></code></pre></div></div>
<p>When the <code>issuer</code> is empty, SAM will run without authentication.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="troubleshooting">Troubleshooting<a href="#troubleshooting" class="hash-link" aria-label="Direct link to Troubleshooting" title="Direct link to Troubleshooting" translate="no">​</a></h2>
<p>For troubleshooting common issues with SAM deployments, see the <a class="" href="/solace-agent-mesh-helm-quickstart/docs-site/troubleshooting">Troubleshooting Guide</a>.</p>
<p>For issues, questions, or contributions, please open an issue in <a href="https://github.com/SolaceProducts/solace-agent-mesh-helm-quickstart/issues" target="_blank" rel="noopener noreferrer" class="">GitHub Issues</a>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/SolaceProducts/solace-agent-mesh-helm-quickstart/edit/main/docs/intro.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--next" href="/solace-agent-mesh-helm-quickstart/docs-site/network-configuration"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Network Configuration</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#table-of-contents" class="table-of-contents__link toc-highlight">Table of Contents</a></li><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a></li><li><a href="#installation" class="table-of-contents__link toc-highlight">Installation</a><ul><li><a href="#step-1-add-helm-repository" class="table-of-contents__link toc-highlight">Step 1: Add Helm Repository</a></li><li><a href="#step-2-configure-image-pull-secret" class="table-of-contents__link toc-highlight">Step 2: Configure Image Pull Secret</a></li><li><a href="#step-3-prepare-and-update-helm-values" class="table-of-contents__link toc-highlight">Step 3: Prepare and update Helm values</a></li><li><a href="#step-4-install-the-chart" class="table-of-contents__link toc-highlight">Step 4: Install the Chart</a></li><li><a href="#step-5-verify-deployment" class="table-of-contents__link toc-highlight">Step 5: Verify Deployment</a></li></ul></li><li><a href="#accessing-sam" class="table-of-contents__link toc-highlight">Accessing SAM</a></li><li><a href="#upgrading" class="table-of-contents__link toc-highlight">Upgrading</a><ul><li><a href="#upgrading-sam-core-deployment" class="table-of-contents__link toc-highlight">Upgrading SAM Core Deployment</a></li><li><a href="#upgrading-sam-agents" class="table-of-contents__link toc-highlight">Upgrading SAM Agents</a></li></ul></li><li><a href="#uninstalling" class="table-of-contents__link toc-highlight">Uninstalling</a></li><li><a href="#configuration-options" class="table-of-contents__link toc-highlight">Configuration Options</a><ul><li><a href="#required-configuration" class="table-of-contents__link toc-highlight">Required Configuration</a></li><li><a href="#service-configuration" class="table-of-contents__link toc-highlight">Service Configuration</a></li><li><a href="#resource-limits" class="table-of-contents__link toc-highlight">Resource Limits</a></li><li><a href="#persistence" class="table-of-contents__link toc-highlight">Persistence</a></li><li><a href="#role-based-access-control-rbac" class="table-of-contents__link toc-highlight">Role-Based Access Control (RBAC)</a></li><li><a href="#disabling-authentication-development-only" class="table-of-contents__link toc-highlight">Disabling Authentication (Development Only)</a></li></ul></li><li><a href="#troubleshooting" class="table-of-contents__link toc-highlight">Troubleshooting</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/solace-agent-mesh-helm-quickstart/docs-site/">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/solace-agent-mesh-helm-quickstart/docs-site/network-configuration">Network Configuration</a></li><li class="footer__item"><a class="footer__link-item" href="/solace-agent-mesh-helm-quickstart/docs-site/troubleshooting">Troubleshooting</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Resources</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://docs.solace.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Solace Docs<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://github.com/SolaceProducts/solace-agent-mesh-helm-quickstart" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Repository<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Helm Repository</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://solaceproducts.github.io/solace-agent-mesh-helm-quickstart/index.yaml" target="_blank" rel="noopener noreferrer" class="footer__link-item">Chart Index<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://github.com/SolaceProducts/solace-agent-mesh-helm-quickstart/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item">Report Issues<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Solace. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>